---
layout: default
title: "Menu Prototyping"
---

<div>
  <p>
    This is a prototype for a menu that would control which options appear in a user's Olli
    tree and what order they appear in. To change the order, use command-up and command-down
    while focused on the item whose order you want to change.
  </p>
  <div class="options-set">
    <legend>Token Options</legend>
    <div> <input type="checkbox" id="view-number"> <label for="view-number">View Number</label> </div>
    <div> <input type="checkbox" id="view-name"> <label for="view-name">View Name</label> </div>
    <div> <input type="checkbox" id="axis-location"> <label for="axis-location">Axis Location</label> </div>
    <div> 
      <input type="checkbox" id="relative-value" onclick="changeAssociatedInputState(this)"> <label for="relative-value">Relative Value</label> 
      <input type="number" min='1' max='10' id="relative-value-input" disabled> <label for="relative-value-input">Buckets</label>
    </div>
  </div>

  <div class="options-set">
    <legend>Axis Options</legend>
    <div> <input type="checkbox" id="min"> <label for="min">Minimum</label> </div>
    <div> <input type="checkbox" id="max"> <label for="max">Maximum</label> </div>
    <div> <input type="checkbox" id="avg"> <label for="avg">Average</label> </div>
    <div> <input type="checkbox" id="trend"> <label for="trend">Trend</label> </div>
  </div>
</div>

<style>
  input[type='number']{
    width: 3em;
  } 
  
  .options-set {
    margin: 1em;
  }
</style>

<script>
  document.addEventListener('keydown', (e) => {
    if (e.metaKey && e.key === 'ArrowUp') {
      const thisCheckbox = document.activeElement;
      const thisDiv = thisCheckbox.parentNode;
      const previousDiv = thisDiv.previousElementSibling;
      if (previousDiv != null && previousDiv.nodeName !== "LEGEND") {
        // Note: don't want to call insertBefore(thisDiv, previousDiv)
        // because first parameter to insertBefore loses focus
        thisDiv.insertAdjacentElement('beforebegin', previousDiv);
      }
    } else if (e.metaKey && e.key === 'ArrowDown') {
      const thisCheckbox = document.activeElement;
      const thisDiv = thisCheckbox.parentNode;
      const nextDiv = thisDiv.nextElementSibling;
      if (nextDiv != null) {
        thisDiv.parentNode.insertBefore(nextDiv, thisDiv);
      }
    }
  })

  function changeAssociatedInputState(input) {
    document.getElementById(`${input.id}-input`).disabled = !input.checked;
  }
</script>